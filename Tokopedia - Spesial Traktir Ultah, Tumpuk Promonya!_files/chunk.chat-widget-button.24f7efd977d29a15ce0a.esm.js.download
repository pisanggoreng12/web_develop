(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[226],{1612:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(64),o=n.n(r),c=n(1719),l=n(1171),d=n(2081),s=n(1533),u=n(2082),m=n(1062),p=n(1250),f=n(1699),h=n(1588),v=n(1520),k=n(1960),b=n(31),g=n(48),N=n(244),I=n(4960),x=n.n(I),S=n(1860),y=n(22),E=n(4961),C=n.n(E),D=function(e,t){return Object(y.useQuery)(C.a,{variables:{isSeller:e,shopId:String(t)},skip:Boolean(!t),fetchPolicy:"network-only"}).data},O=n(1),w=n(20),j=function(e,t){return Object(w.css)("position:fixed;right:6%;bottom:0;height:auto;padding:6px 20px;box-shadow:0 2px 6px 0 ",O.NN300,";color:",O.GN500,";border-radius:20px;font-size:16px;z-index:100;transition:all ease-in-out 0.2s;transform:translateY(",e?"20px":"-".concat(t,"px"),");opacity:",e?"0":"1",";span{display:flex;align-items:center;}.chatImgWrapper{position:relative;height:30px;}.chatImg{position:relative;left:0;top:0;width:28px;height:auto;transform:translateY(0);margin-right:8px;margin-bottom:2px;}.chatUnreadsCounter{position:absolute;border:solid 2px ",O.NN0,";background-color:",O.RN500,";color:",O.NN0,";top:-1px;right:1px;border-radius:18px;text-align:center;font-style:initial;font-size:8px;line-height:9px;font-weight:700;padding:2px 4px;}")},_=function(e,t,n){return Object(w.css)("max-height:calc(100vh - 233px);height:450px;width:560px;display:",t?"flex":"none",";position:fixed;right:6%;bottom:0;background-color:",O.NN0,";border-radius:12px;box-shadow:0 2px 30px 0 ",O.NN300,";z-index:",e?"60":"-1",";transition:all ease-in-out 0.2s;transform:translateY(",e?"-".concat(n,"px"):"0px",");opacity:",e?"1":"0",";")},A=n(4962),P=function(){var e,t=Object(a.useContext)(m.a),n=t.noButton,r=t.bottom,o=t.attachedData,c=t.isTypeSeller,l=t.gtmPushObject,d=Object(a.useContext)(p.a).shopId,s=Object(a.useContext)(N.a),u=s.isDisplayedWidget,f=s.showChatWidget,h=s.isDisplayedWidgetDOM,v=s.closeChatWidget,k=Object(a.useState)(!0),I=Object(b.a)(k,2),y=I[0],E=I[1],C=D(c,d),O=(null==C||null===(e=C.notifications)||void 0===e?void 0:e.chat)||{},w=O.unreadsUser,P=O.unreadsSeller,V=c?P||0:w||0,F=Object(a.useCallback)((function(){var e=(null==o?void 0:o.page)||"";Object(S.a)(l,e),f&&f(o)}),[o,l,f]);return Object(a.useEffect)((function(){h&&y&&E(!1)}),[y,E,h]),Object(a.useEffect)((function(){return function(){v&&v()}}),[v]),i.a.createElement(i.a.Fragment,null,!n&&i.a.createElement(g.default,{className:j(u,r),onClick:F,filled:!0},i.a.createElement("div",{className:"chatImgWrapper","data-testid":"btnChatFloating"},i.a.createElement("img",{className:"chatImg",src:x.a,alt:"Chat"}),V>0&&i.a.createElement("span",{className:"chatUnreadsCounter"},V))," ","Chat"),y?null:i.a.createElement("div",{className:_(u,h,r)},i.a.createElement(A.a,{notificationData:C,totalChatUnreads:V})))};t.default=function(e){var t=e.userId;return(void 0===t?0:t)>0?i.a.createElement(o.a,{source:"pluggables_chat_widget",render:function(){return i.a.createElement(c.a,null)}},i.a.createElement(m.b,e,i.a.createElement(p.b,null,i.a.createElement(l.b,null,i.a.createElement(h.b,null,i.a.createElement(v.b,null,i.a.createElement(d.b,null,i.a.createElement(s.b,null,i.a.createElement(u.b,null,i.a.createElement(f.b,null,i.a.createElement(k.b,null,i.a.createElement(P,null)))))))))))):null}},1860:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"g",(function(){return s})),n.d(t,"l",(function(){return u})),n.d(t,"j",(function(){return m})),n.d(t,"k",(function(){return p})),n.d(t,"h",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return v})),n.d(t,"d",(function(){return k})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return N}));var a=n(15),i=function(e){var t=(e||[]).map((function(e){var t;return null==e||null===(t=e.option)||void 0===t?void 0:t.value}));return t.length>1?t.join(" - "):t.length?t.join(""):""},r=function(e,t){var n="chat";return e?n="chat - search chat":t&&(n="broadcast"),n},o=function(e){return e?"broadcast - ".concat(e):"chat"},c=function(e,t,n,i,r,o){e(Object(a.a)({event:t,eventCategory:n,eventAction:i,eventLabel:r},o))},l=function(e,t){c(e,"clickInboxChat","inbox-chat","click on chat button","chat widget - ".concat(t))},d=function(e){c(e,"clickChatDetail","chat detail","click on order progress card","seller")},s=function(e){c(e,"clickChatDetail","chat detail","click on lihat detail pesanan","seller")},u=function(e){c(e,"clickChatDetail","chat detail","click cta on order progress card","seller - terima pesanan")},m=function(e){c(e,"clickChatDetail","chat detail","click cta on order detail","seller - terima pesanan")},p=function(e){c(e,"clickChatDetail","chat detail","click on terima pesanan button","seller - pop up")},f=function(e){c(e,"clickChatDetail","chat detail","click on lihat semua pesanan","seller")},h=function(e){var t=e.gtm,n=e.source,a=e.productId;c(t,"clickChatDetail","chat detail","add wishlist","".concat(a," - ").concat(n))},v=function(e){var t=e.gtm,n=e.isSearch,a=e.blastId,o=e.prodName,l=e.prodId,d=e.prodPrice,s=e.position,u=e.variant,m=e.userId,p=e.role,f=r(n,a),h="".concat(p," - ").concat(a?"broadcast":"chat"," - ").concat(a," - ").concat(a?"campaign":"notCampaign");c(t,"productView","chat detail","view on product thumbnail",h,{businessUnit:"communication",currentSite:"tokopediamarketplace",trackerId:"15039",ecommerce:{currencyCode:"IDR",impressions:[{name:o,id:l,price:d,brand:"",category:"",variant:i(u),list:"/".concat(f),position:s}]},userId:m})},k=function(e){var t=e.gtm,n=e.blastId,a=e.isSearch,l=e.prodName,d=e.prodId,s=e.prodPrice,u=e.position,m=e.variant,p=r(a,n),f=o(n);c(t,"productClick","chat detail","click on product thumbnail",f,{ecommerce:{click:{actionField:{list:"/".concat(p)},products:[{name:l,id:d,price:s,brand:"",category:"",variant:i(m),list:"/".concat(p),position:u}]}}})},b=function(e){var t=e.gtm,n=e.eventAction,a=e.blastId,l=e.isSearch,d=e.prodName,s=e.prodId,u=e.prodPrice,m=e.shopId,p=e.isGold,f=e.isOfficial,h=e.shopName,v=e.cartId,k=e.variant,b=e.trackerId,g=e.campaignId,N="reguler";f?N="official_store":p&&(N="gold_merchant");var I=r(l,a),x=o(a),S="".concat(x," -  ").concat(a," - ").concat(Number(g)>0?"campaign":"notCampaign"," - ").concat(g||0," - ").concat(s);return c(t,"addToCart","chat detail",n,S,{ecommerce:{currencyCode:"IDR",trackerId:b,add:{products:[{name:d,id:s,price:u,brand:"",category:"",variant:i(k),quantity:1,dimension128:m,dimension130:N,dimension129:h,dimension82:v,dimension81:"/".concat(I)}]}}})},g=function(e){var t=e.gtm,n=e.blastId,a=e.isSearch,i=e.prodName,r=e.prodId,o=e.prodPrice,c=e.shopId,l=e.isGold,d=e.isOfficial,s=e.shopName,u=e.cartId,m=e.variant,p=e.campaignId,f=e.useCase;b({gtm:t,eventAction:"click atc on product thumbnail",trackerId:"15040",blastId:n,isSearch:a,prodName:i,prodId:r,prodPrice:o,shopId:c,isGold:l,isOfficial:d,shopName:s,cartId:u,variant:m,useCase:f,campaignId:p})},N=function(e){var t=e.gtm,n=e.blastId,a=e.isSearch,i=e.prodName,r=e.prodId,o=e.prodPrice,c=e.shopId,l=e.isGold,d=e.isOfficial,s=e.shopName,u=e.cartId,m=e.variant;b({gtm:t,eventAction:"click buy on product thumbnail",blastId:n,isSearch:a,prodName:i,prodId:r,prodPrice:o,shopId:c,isGold:l,isOfficial:d,shopName:s,cartId:u,variant:m})}},4960:function(e,t){e.exports="https://assets.tokopedia.net/assets-tokopedia-lite/v2/zeus/kratos/57d0f05a.svg"},4961:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"NotificationQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isSeller"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"shopId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"notifications"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"shop_id"},value:{kind:"Variable",name:{kind:"Name",value:"shopId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"chat"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unreadsSeller"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"isSeller"}}}]}]},{kind:"Field",name:{kind:"Name",value:"unreadsUser"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"skip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"isSeller"}}}]}]}]}}]}}]}}],loc:{start:0,end:172}};n.loc.source={body:"query NotificationQuery($isSeller:Boolean!,$shopId:String){notifications(input:{shop_id:$shopId}){chat{unreadsSeller@include(if:$isSeller) unreadsUser@skip(if:$isSeller)}}}",name:"GraphQL request",locationOffset:{line:1,column:1}};function a(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){a(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){a(e,t)})),e.definitions&&e.definitions.forEach((function(e){a(e,t)}))}var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var a=e.definitions[n];if(a.name&&a.name.value==t)return a}}n.definitions.forEach((function(e){if(e.name){var t=new Set;a(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.NotificationQuery=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,c=new Set;for(a.forEach((function(e){c.add(e)}));c.size>0;){var l=c;c=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){c.add(e)})))}))}return o.forEach((function(t){var a=r(e,t);a&&n.definitions.push(a)})),n}(n,"NotificationQuery")},4962:function(e,t,n){"use strict";var a=n(0),i=n.n(a),r=n(4),o=Object(r.default)({resolved:{},chunkName:()=>"chat-widget-view",isReady(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.all([n.e(0),n.e(77),n.e(810)]).then(n.bind(null,3677))},requireAsync(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then((function(e){return t.resolved[n]=!0,e}))},requireSync(e){var t=this.resolve(e);return n(t)},resolve(){return 3677}},{ssr:!1}),c=function(e){return i.a.createElement(o,e)};t.a=c}}]);